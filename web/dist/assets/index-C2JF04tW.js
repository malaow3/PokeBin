import{d as Ce,c as t,a as q,o as Pe,b as p,t as I,u as n,s as Ne,i as g,S as F,m as Be,r as Le}from"./app-DFXuq7DK.js";import{i as He,a as Te,l as Ae,v as Me,u as G,e as De}from"./large_logo_cropped-7o4_HSqC.js";import{P as Fe}from"./patreon-D_bSh0ed.js";var Ie=I('<h1 class="text-sm font-bold text-[#c2a8d4]"> active PokeBin users!'),Je=I('<h1 class="text-sm font-bold text-[#c2a8d4]"> total PokeBins created!'),Oe=I('<main class="min-h-screen flex flex-col overflow-auto bg-[#f9f9f9] dark:bg-zinc-950 text-black dark:text-white"><form action=/create method=post id=form class="flex-1 flex md:flex-row flex-col overflow-auto"><textarea id=paste name=paste placeholder="Paste your tournament winning team here!"class="bg-white dark:bg-zinc-950 m-0 p-3 box-border text-black dark:text-white font-mono resize-none outline-none border-none md:flex-1 h-[40vh] md:h-auto"></textarea><div class="md:w-[28rem] w-full bg-[#f9f9f9] dark:bg-zinc-900 text-black dark:text-white flex flex-col p-4 overflow-y-auto"><div class="flex-1 flex flex-col"><div><div class="flex justify-center items-center mb-2"><div class="w-[300px] aspect-[2/1]"><img class="border-none outline-none shadow-none"alt="PokeBin Logo"></div></div><div class="flex-1 flex flex-col gap-4"><div class="flex flex-row items-center gap-3"><label for=title class="w-20 text-right font-medium">Title</label><input type=text name=title id=title autocomplete=off class="flex-1 text-sm rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-black dark:text-white outline-none focus:border-zinc-500 px-2 py-1"></div><div class="flex flex-row items-center gap-3"><label for=author class="w-20 text-right font-medium">Author</label><input type=text name=author id=author autocomplete=off class="flex-1 text-sm rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-black dark:text-white outline-none focus:border-zinc-500 px-2 py-1"></div><div class="flex flex-row items-center gap-3"><label for=rental class="w-20 text-right font-medium">Rental</label><input type=text name=rental id=rental autocomplete=off class="flex-1 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-black dark:text-white outline-none focus:border-zinc-500 px-2 py-1"minlength=6 maxlength=6></div><div class="flex flex-row items-center gap-3"><label for=format class="w-20 text-right font-medium">Format</label><input type=text name=format id=format autocomplete=off class="flex-1 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-black dark:text-white outline-none focus:border-zinc-500 px-2 py-1"></div><div class="flex flex-row items-start gap-3"><label for=notes class="w-20 text-right font-medium pt-1">Notes</label><textarea id=notes name=notes rows=4 maxlength=5000 autocomplete=off class="flex-1 text-sm rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-black dark:text-white outline-none focus:border-zinc-500 px-2 py-1 resize-y min-h-[100px] max-h-[200px] md:max-h-none"></textarea></div><div class="flex flex-row items-center gap-3"><label for=password class="w-20 text-right font-medium">Password</label><input type=text name=password id=password autocomplete=off class="flex-1 rounded border border-zinc-300 dark:border-zinc-600 bg-white dark:bg-zinc-700 text-black dark:text-white outline-none focus:border-zinc-500 px-2 py-1"></div><div class=mt-4><button type=submit class="w-full bg-[#c2a8d4] hover:bg-[#9770b6] text-black font-bold py-2 px-4 rounded">Submit Paste!</button></div><input type=text hidden name=data id=data></div></div></div><div class="mt-8 pt-6 flex flex-col items-center space-y-1"><div></div><a href=/about class="text-[#c2a8d4] hover:text-[#9770b6] text-base">About PokeBin</a><a href=/settings class="text-[#c2a8d4] hover:text-[#9770b6] text-base">Settings</a><span class="text-gray-600 opacity-20 text-xs">Â© Nelvana LLC');function Re(P){let r=document.querySelector('meta[name="theme-color"]');r||(r=document.createElement("meta"),r.setAttribute("name","theme-color"),document.head.appendChild(r)),r.setAttribute("content",P?"#000000":"#f9f9f9")}const We=()=>{const[P,r]=t(),[K,Q]=t(),[V,X]=t(),[Y,Z]=t(),[ee,te]=t(),[N,oe]=t(),[ne,le]=t(),[ae,se]=t(),[ie,re]=t(),[ce,de]=t(),[fe,ue]=t(),[be,me]=t(),[xe,he]=t(),[w,ge]=t(""),[v,pe]=t(""),[we,ve]=t(!1),J=localStorage.getItem("darkMode");let O=!0;J!==null&&(O=JSON.parse(J));const[R]=t({darkMode:O});function W(){const e=document.getElementsByTagName("body")[0];R().darkMode?(e.classList.add("dark"),e.classList.remove("light")):(e.classList.add("light"),e.classList.remove("dark")),Re(R().darkMode)}q(()=>{W()});function ke(){const e=N();e&&(e.style.height="auto")}function ye(){const e=N(),l=fe(),a=be(),s=xe(),o=ce();if(e&&l&&a&&s&&o){const c=o.clientHeight,d=window.innerHeight-a.clientHeight-s.clientHeight-l.clientHeight-c-16;e.style.maxHeight=`${d}px`}}Pe(async()=>{W();const e="/ws",l=new WebSocket(e);l.onopen=async()=>{console.log("WebSocket connected to:",e),pe(await fetch("/live").then(o=>o.text()))},ge(await fetch("/total").then(o=>o.text())),await He(),await Te(),ve(!0);const s=await(await fetch("/version")).text();console.log(s)}),q(()=>{we()&&w()!==""&&v()!==""&&ye()});async function $e(e){e.preventDefault();const l=Date.now(),a=K();if(!a)return!1;if(a.value==="")return alert("Paste cannot be empty!"),!1;const s=Me(a.value);if(console.log(s),s!==0)return s===-1?(alert("PokeBin encountered an issue! Please refresh and try again!"),!1):s===6?(alert("PokeBin contains too many Pokemon!"),!1):(alert("Not a valid PokeBin! If you believe this is incorrect, try re-copying from Showdown and please file an issue on GitHub."),!1);const o=V(),c=Y(),d=ee(),k=N(),f=ne(),y=ae(),u=ie(),m=P();if(!o||!c||!d||!k||!f||!y||!u||!m)return!1;let x=a.value;x=x.trim();const h={title:c.value,author:d.value,notes:k.value,format:f.value,rental:y.value,content:x},b={encrypted:!1,data:h};if(o.value===""){const T=JSON.stringify(b),z=G(T);u.value=z;const E=Date.now();return console.log(`Processing took ${E-l}ms`),m.submit(),!0}const B=o.value,$=JSON.stringify(h),_=De($,B);if(_)b.encrypted=!0,b.data=_;else throw new Error("Encryption failed");const L=JSON.stringify(b),S=G(L);u.value=S,o.disabled=!0;const H=Date.now();return console.log(`Processing took ${H-l}ms`),m.submit(),!0}return p(F,{get when(){return Be(()=>w()!=="")()&&v()!==""},get children(){var e=Oe(),l=e.firstChild,a=l.firstChild,s=a.nextSibling,o=s.firstChild,c=o.firstChild,d=c.firstChild,k=d.firstChild,f=k.firstChild,y=d.nextSibling,u=y.firstChild,m=u.firstChild,x=m.nextSibling,h=u.nextSibling,b=h.firstChild,B=b.nextSibling,$=h.nextSibling,_=$.firstChild,L=_.nextSibling,S=$.nextSibling,H=S.firstChild,T=H.nextSibling,z=S.nextSibling,E=z.firstChild,j=E.nextSibling,A=z.nextSibling,_e=A.firstChild,Se=_e.nextSibling,ze=A.nextSibling,Ee=ze.nextSibling,C=o.nextSibling,M=C.firstChild;return l.addEventListener("submit",i=>$e(i)),n(r,l),n(Q,a),n(me,c),Ne(f,"src",Ae),f.style.setProperty("height","125px"),f.style.setProperty("width","290px"),n(Z,x),n(te,B),n(se,L),n(le,T),n(de,E),j.$$dblclick=ke,n(oe,j),n(he,A),n(X,Se),n(re,Ee),n(ue,C),g(C,p(F,{get when(){return v()!==""},get children(){var i=Ie(),D=i.firstChild;return g(i,v,D),i}}),M),g(C,p(F,{get when(){return w()!==""},get children(){var i=Je(),D=i.firstChild;return g(i,w,D),i}}),M),g(M,p(Fe,{})),e}})};Ce(["dblclick"]);const U=document.getElementById("root");U&&Le(()=>p(We,{}),U);
