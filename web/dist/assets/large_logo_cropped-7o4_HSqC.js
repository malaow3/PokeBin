function Re(n,t){if(!l||!C)return null;const e=t.length,o=n.length,c=l.allocUint8(e+o);if(!c)return console.error("Failed to allocate memory"),null;let s=new Uint8Array(l.memory.buffer);const f=new TextEncoder().encode(t),y=new TextEncoder().encode(n);for(let u=0;u<e;u++)s[c+u]=f[u];for(let u=0;u<o;u++)s[c+e+u]=y[u];if(!l.encryptMessage(c,e,o))return console.error("Failed to encrypt message"),l.resetArena(),null;const w=l.getResultPtr(),p=l.getResultLen();if(w===0||p===0)return console.error("Invalid result"),l.resetArena(),null;s=new Uint8Array(l.memory.buffer);const U=new TextDecoder().decode(s.slice(w,w+p));return l.resetArena(),U}function Ve(n,t){if(!l||!C)return null;const e=t.length,o=n.length,c=l.allocUint8(e+o);if(!c)return console.error("Failed to allocate memory"),null;let s=new Uint8Array(l.memory.buffer);const f=new TextEncoder().encode(t),y=new TextEncoder().encode(n);for(let u=0;u<e;u++)s[c+u]=f[u];for(let u=0;u<o;u++)s[c+e+u]=y[u];if(!l.decryptMessage(c,e,o))return console.error("Failed to encrypt message"),l.resetArena(),null;const w=l.getResultPtr(),p=l.getResultLen();if(w===0||p===0)return console.error("Invalid result"),l.resetArena(),null;s=new Uint8Array(l.memory.buffer);const U=new TextDecoder().decode(s.slice(w,w+p));return l.resetArena(),U}const a=Uint32Array.BYTES_PER_ELEMENT,ge=Uint8Array.BYTES_PER_ELEMENT,G=0;function I(n,t,e){const o=new Uint8Array(n.memory.buffer,t,e);return new TextDecoder().decode(o)}function m(n,t){if(t===0)return"";const e=n.memory.buffer.byteLength;if(t>=e)return console.error(`Invalid pointer: ${t} exceeds memory size ${e}`),"";const o=new Uint8Array(n.memory.buffer,t),c=e-t,s=o.findIndex((f,y)=>y>=c?!0:f===G);if(s===-1||s===0)return"";try{return I(n,t,s)}catch(f){return console.error(`Failed to decode string at pointer ${t}:`,f),""}}function D(n,t){const e=new TextEncoder().encode(t),o=e.length+ge,c=n.exports.allocUint8(o),s=new Uint8Array(n.memory.buffer,c,o);return s.set(e),s[e.length]=G,{pointer:c,length:e.length}}let l,C,z;async function Me(){l=(await WebAssembly.instantiateStreaming(fetch("/wasm"),{env:{_throwError(o,c){const s=I(z,o,c);throw new Error(s)},_consoleLog(o,c){const s=I(z,o,c);console.log(s)}}})).instance.exports,C=l.memory,z={exports:l,memory:C};const e=BigInt(Date.now());l.init(e)}function Pe(){const t=window.location.href.split("/");return t[t.length-1]}let d,r,A={ptr:0,size:0};function Ae(n,t){A={ptr:n,size:t}}let i;async function Ce(){const t=await(await fetch("/version")).text();d=(await WebAssembly.instantiateStreaming(fetch(`/web_wasm?v=${t}`),{env:{_throwError(s,f){const y=I(i,s,f);throw new Error(y)},_consoleLog(s,f){const y=I(i,s,f);console.log(y)},createQRCodeCallback:Ae}})).instance.exports,r=d.memory,i={exports:d,memory:r};const c=BigInt(Date.now());d.init(c)}function Oe(n,t,e){if(n().lastViewedCount===0)return;const o=n().lastViewedPacked,{pointer:c,length:s}=D(i,o);e.id=Pe();const{pointer:f,length:y}=D(i,JSON.stringify(e));i.exports.savePasteToLastViewed(n().lastViewedCount,c,s,f,y);const b=i.exports.getPackedPtr(),w=i.exports.getPackedLen();if(w===-1){console.log("Failed to get packed string length"),i.exports.resetPackedResult();return}const p=new Uint8Array(r.buffer,b,w),g=new TextDecoder().decode(p);console.log(g),t({...n(),lastViewedPacked:g}),localStorage.setItem("lastViewedPacked",g),i.exports.resetPackedResult(),i.exports.resetArena()}function $e(n){if(!d||!r)return-1;const t=new TextEncoder().encode(n),e=d.allocUint8(t.length);if(!e)return console.error("Failed to allocate memory"),-1;new Uint8Array(d.memory.buffer).set(t,e);const c=d.validatePaste(e,t.length);return d.resetArena(),c}function W(n){return Math.ceil(n/4)*4}function be(n){try{let t=0;const o=new Uint32Array(r.buffer,n,1)[0],c=m(i,o);t+=a;const f=new Uint32Array(r.buffer,n+t,1)[0],y=m(i,f);return{name:c,type1:y}}catch(t){return console.error(t),{name:"",type1:""}}}function Se(n){try{const t=n;let e=0;const c=new Uint32Array(r.buffer,t,1)[0],s=m(i,c);e+=a;const y=new Uint32Array(r.buffer,t+e,1)[0],b=m(i,y);e+=a;const p=new Uint32Array(r.buffer,t+e,1)[0],g=m(i,p);e+=a;const u=new Uint32Array(r.buffer,t+e,1)[0];e+=a;const O=new Uint32Array(r.buffer,t+e,1)[0],$=m(i,O);e+=a;const E=new Uint32Array(r.buffer,t+e,1)[0],B=m(i,E);e+=a;const S=new Uint32Array(r.buffer,t+e,1)[0];e+=a;const T=[];if(S>0){const M=new Uint32Array(r.buffer,t+e,1)[0],h=new Uint32Array(r.buffer,M,S);if(S>0)for(let x=0;x<S;x++){const N=h[x];try{const v=be(N);T.push(v)}catch(v){console.error(`Error decoding move at index ${x}:`,v)}}}e+=a;let L="";u===77?L="M":u===70&&(L="F");const R=[];for(let P=0;P<6;P++){const h=new Uint32Array(r.buffer,t+e,1)[0];R.push(h),e+=a}const V=[];for(let P=0;P<6;P++){const h=new Uint32Array(r.buffer,t+e,1)[0];V.push(h),e+=a}const J=t+e,_=new Uint32Array(r.buffer,J,1)[0];e+=a;const k=[];if(_>0){const P=t+e,h=new Uint32Array(r.buffer,P,1)[0],x=W(h),N=new Uint32Array(r.buffer,x,_);for(let v=0;v<_;v++){const we=N[v],pe=m(i,we);k.push(pe)}e+=a*_}else e+=a;const F=new Uint32Array(r.buffer,t+e,1)[0],K=m(i,F);e+=a;const X=new Uint32Array(r.buffer,t+e,1)[0],Z=m(i,X);e+=a;const ee=new Uint32Array(r.buffer,t+e,1)[0],te=m(i,ee);e+=a;const ne=new Uint32Array(r.buffer,t+e,1)[0],re=m(i,ne);e+=a;const oe=new Uint32Array(r.buffer,t+e,1)[0],se=m(i,oe);e+=a;const ce=new Uint32Array(r.buffer,t+e,1)[0];e+=a;const ie=new Uint32Array(r.buffer,t+e,1)[0],ae=m(i,ie);e+=a;const le=new Uint32Array(r.buffer,t+e,1)[0],fe=m(i,le);e+=a;const ue=new Uint32Array(r.buffer,t+e,1)[0],me=m(i,ue);e+=a;const ye=new Uint32Array(r.buffer,t+e,1)[0],de=m(i,ye);return e+=a,{name:s,nickname:b,item:g,gender:L,item_image:$,pokemon_image:B,moves_len:S,moves:T,evs:R,ivs:V,lines_count:_,lines:k,last_stat_ev:K,last_stat_iv:Z,type1:te,type2:re,ability:se,level:ce,shiny:ae,hidden_power:fe,tera_type:me,nature:de}}catch(t){return console.error(t),{name:"",nickname:"",item:"",gender:"",item_image:"",pokemon_image:"",moves_len:0,moves:[],evs:[],ivs:[],lines_count:0,lines:[],last_stat_ev:"",last_stat_iv:"",type1:"",type2:"",ability:"",level:100,shiny:"",hidden_power:"",tera_type:"",nature:""}}}function he(n){try{const e=new Uint32Array(r.buffer,n,1)[0],o=m(i,e),s=new Uint32Array(r.buffer,n+a,1)[0],f=m(i,s),b=new Uint32Array(r.buffer,n+a*2,1)[0],w=m(i,b),g=new Uint32Array(r.buffer,n+a*3,1)[0],U=m(i,g),Q=new Uint32Array(r.buffer,n+a*4,1)[0],O=m(i,Q),$=n+a*5,E=new Uint32Array(r.buffer,$,1)[0],B=W(n+a*6),S=new Uint32Array(r.buffer,B,1)[0],T=[],L=W(S),R=new Uint32Array(r.buffer,L,E);for(let k=0;k<E;k++){const q=R[k],F=Se(q);T.push(F)}const V=B+a,Y=new Uint32Array(r.buffer,V,1)[0]===1;return{title:o,author:f,notes:w,format:U,rental:O,pokemon_len:E,pokemon:T,isOts:Y}}finally{d.destroyPaste(n)}}function Fe(n,t){if(!d||!r)return null;const{pointer:e,length:o}=D(i,n),c=d.parsePaste(e,o,t),s=he(c);return d.resetArena(),s}function Ne(n){return btoa(String.fromCharCode(...new TextEncoder().encode(n)))}function ve(n,t){const e=document.createElement("canvas"),o=e.getContext("2d");if(o===null)return;const c=10,s=c*t;e.width=s,e.height=s,o.scale(c,c),o.fillStyle="white",o.fillRect(0,0,t,t),o.fillStyle="black";for(let f=0;f<t;f++)for(let y=0;y<t;y++)n[f*t+y]===1&&o.fillRect(y,f,1,1);return e.toDataURL("image/png")}function ze(n){const t=new TextEncoder().encode(n),e=d.allocUint8(t.length+1),o=new Uint8Array(r.buffer,e,t.length+1);o.set(t),o[t.length]=0,d.createQRCode(e);const c=new Uint8Array(r.buffer,A.ptr,A.size*A.size),s=ve(c,A.size);return d.free(e,n.length),d.free(A.ptr,A.size*A.size),s}const De="/assets/large_logo_cropped-B2GBTWwU.webp";export{Oe as S,Me as a,ze as c,Ve as d,Re as e,Pe as g,Ce as i,De as l,Fe as p,Ne as u,$e as v};
