{"version":3,"file":"static/js/report.7c965076.js","sources":["webpack://web/./src/report.tsx","webpack://web/webpack/runtime/define_property_getters","webpack://web/webpack/runtime/has_own_property","webpack://web/webpack/runtime/on_chunk_loaded","webpack://web/webpack/runtime/rspack_version","webpack://web/webpack/runtime/jsonp_chunk_loading","webpack://web/webpack/runtime/rspack_unique_id"],"sourcesContent":["import { createSignal, onMount, Show } from \"solid-js\";\nimport { render } from \"solid-js/web\";\nimport \"./app.css\";\n\nconst ReportPage = () => {\n  const [pasteLink, setPasteLink] = createSignal(\"\");\n  const [password, setPassword] = createSignal(\"\");\n  const [isValidLink, setIsValidLink] = createSignal(true);\n  const [done, setDone] = createSignal(false);\n  const [errorMessage, setErrorMessage] = createSignal(\"\");\n\n  onMount(() => {\n    const wsUrl = \"/ws\";\n    const socket = new WebSocket(wsUrl);\n    socket.onopen = async () => {\n      console.log(\"WebSocket connected to:\", wsUrl);\n    };\n  });\n\n  const handleSubmit = async (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n\n    setIsValidLink(true); // Reset validation status on each submit\n    setErrorMessage(\"\"); // Reset error message on each submit\n\n    // Basic validation\n    if (!pasteLink()) {\n      alert(\"Please enter the PokeBin link.\");\n      return;\n    }\n\n    // Validate the link format against the full link\n    try {\n      const linkURL = new URL(pasteLink());\n      if (linkURL.hostname !== new URL(\"https://pokebin.com\").hostname) {\n        throw new Error(\"Not a PokeBin link\");\n      }\n      if (!/[a-zA-Z0-9-]+$/.test(linkURL.pathname.slice(1))) {\n        throw new Error(\"Paste ID is invalid\");\n      }\n    } catch (e) {\n      setIsValidLink(false);\n      setErrorMessage(\n        \"Please enter a valid PokeBin link in the format \" +\n          \"https://pokebin.com/your-paste-id.\",\n      );\n      return;\n    }\n\n    // Construct the report data\n    interface ReportData {\n      paste: string;\n      password: string | null;\n    }\n\n    const reportData: ReportData = {\n      paste: pasteLink(),\n      password: password(),\n    };\n\n    if (password() === \"\") {\n      reportData.password = null;\n    }\n\n    try {\n      const response = await fetch(\"/report\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\", // Add content type header\n        },\n        body: JSON.stringify(reportData),\n      });\n\n      if (!response.ok) {\n        const errorBody = await response.text();\n        throw new Error(\n          `Report submission failed: ${response.status} ${response.statusText} - ${errorBody}`,\n        );\n      }\n\n      // Clear the form\n      setPasteLink(\"\");\n      setPassword(\"\");\n      setDone(true);\n    } catch (error) {\n      console.error(\"Error during report submission:\", error);\n      setErrorMessage(\"Failed to submit report. Please try again.\");\n      setDone(false);\n    }\n  };\n\n  return (\n    <div class=\"text-white min-h-screen flex\">\n      <div class=\"container mx-auto px-4 py-8 max-w-xl\">\n        <Show\n          when={!done()}\n          fallback={\n            <h1 class=\"text-2xl font-bold mb-2 text-center text-green-300\">\n              Report Submitted!\n            </h1>\n          }\n        >\n          <h1 class=\"text-3xl font-bold mb-2 text-center\">Report a Paste</h1>\n          <p class=\"mb-4 text-center\">\n            If you believe a paste violates our Terms of Service, please submit\n            a report.\n          </p>\n\n          <form onSubmit={handleSubmit} class=\"max-w-xl mx-auto\">\n            <div class=\"mb-4\">\n              <label\n                for=\"pasteLink\"\n                class=\"block text-gray-300 text-sm font-bold mb-2\"\n              >\n                PokeBin Link:\n              </label>\n              <input\n                type=\"text\"\n                id=\"pasteLink\"\n                value={pasteLink()}\n                onInput={(e) => setPasteLink(e.target.value)}\n                placeholder=\"https://pokebin.com/your-paste-id\"\n                class={`shadow appearance-none border rounded w-full py-2 px-3\n                       leading-tight focus:outline-none\n                       focus:shadow-outline bg-zinc-800 text-white border-zinc-600\n                       ${isValidLink() ? \"\" : \"border-red-500\"}`}\n              />\n              <Show when={!isValidLink()}>\n                <p class=\"text-red-500 text-xs italic\">\n                  Please enter a valid PokeBin link in the format\n                  https://pokebin.com/your-paste-id.\n                </p>\n              </Show>\n            </div>\n\n            <div class=\"mb-6\">\n              <label\n                for=\"password\"\n                class=\"block text-gray-300 text-sm font-bold mb-2\"\n              >\n                Password (if applicable):\n              </label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                value={password()}\n                onInput={(e) => setPassword(e.target.value)}\n                placeholder=\"Enter password if the paste is protected\"\n                class=\"shadow appearance-none border rounded w-full py-2 px-3\n                     leading-tight focus:outline-none\n                     focus:shadow-outline bg-zinc-800 text-white border-zinc-600\"\n              />\n            </div>\n\n            <Show when={errorMessage()}>\n              <div class=\"text-red-500 text-sm mb-4\">{errorMessage()}</div>\n            </Show>\n\n            <div class=\"flex items-center justify-center\">\n              <button\n                type=\"submit\"\n                class=\"bg-[#c2a8d4] hover:bg-[#9770b6] text-black font-bold py-2 px-4\n                     rounded focus:outline-none focus:shadow-outline\"\n              >\n                Submit Report\n              </button>\n            </div>\n          </form>\n        </Show>\n      </div>\n    </div>\n  );\n};\n\nconst root = document.getElementById(\"root\");\nif (root) {\n  render(() => <ReportPage />, root);\n}\n","__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif (chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor (var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--)\n\t\t\tdeferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif (\n\t\t\t\t(priority & (1 === 0) || notFulfilled >= priority) &&\n\t\t\t\tObject.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))\n\t\t\t) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif (priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif (fulfilled) {\n\t\t\tdeferred.splice(i--, 1);\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};\n","__webpack_require__.rv = () => (\"1.3.12\")","\n      // object to store loaded and loading chunks\n      // undefined = chunk not loaded, null = chunk preloaded/prefetched\n      // [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\n      var installedChunks = {\"19\": 0,\"95\": 0,};\n      __webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif (chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor (moduleId in moreModules) {\n\t\t\tif (__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif (runtime) var result = runtime(__webpack_require__);\n\t}\n\tif (parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor (; i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif (\n\t\t\t__webpack_require__.o(installedChunks, chunkId) &&\n\t\t\tinstalledChunks[chunkId]\n\t\t) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n","__webpack_require__.ruid = \"bundler=rspack@1.3.12\";\n"],"names":["ReportPage","_el$","_el$2","pasteLink","setPasteLink","createSignal","password","setPassword","isValidLink","setIsValidLink","done","setDone","errorMessage","setErrorMessage","onMount","socket","WebSocket","onopen","console","log","handleSubmit","e","preventDefault","alert","linkURL","URL","hostname","Error","test","pathname","slice","reportData","paste","response","fetch","method","headers","body","JSON","stringify","ok","errorBody","text","status","statusText","error","_tmpl$6","firstChild","_$insert","_$createComponent","Show","when","fallback","_tmpl$7","children","_el$5","_el$6","_el$8","_el$0","_el$10","_el$12","_tmpl$","_tmpl$2","_el$7","_tmpl$5","nextSibling","_el$1","addEventListener","$$input","target","value","_tmpl$3","_el$11","_tmpl$4","_$effect","_$className","root","document","getElementById","render","_$delegateEvents","Object","self"],"mappings":"q7CAIA,IAAMA,EAAaA,SAuFjBC,EAAAC,EAtFA,GAAM,CAACC,EAAWC,EAAa,CAAGC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAa,IACzC,CAACC,EAAUC,EAAY,CAAGF,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAa,IACvC,CAACG,EAAaC,EAAe,CAAGJ,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAa,IAC7C,CAACK,EAAMC,EAAQ,CAAGN,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAa,IAC/B,CAACO,EAAcC,EAAgB,CAAGR,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAa,IAErDS,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAQ,KAGNC,AADe,IAAIC,UADL,OAEPC,MAAM,CAAG,UACdC,QAAQC,GAAG,CAAC,0BAHA,MAId,CACF,GAEA,IAAMC,EAAe,MAAOC,IAO1B,GANAA,EAAEC,cAAc,GAEhBb,EAAe,IACfI,EAAgB,IAGZ,CAACV,IAAa,YAChBoB,MAAM,kCAKR,GAAI,CACF,IAAMC,EAAU,IAAIC,IAAItB,KACxB,GAAIqB,EAAQE,QAAQ,GAAK,IAAID,IAAI,uBAAuBC,QAAQ,CAC9D,MAAM,AAAIC,MAAM,sBAElB,GAAI,CAAC,iBAAiBC,IAAI,CAACJ,EAAQK,QAAQ,CAACC,KAAK,CAAC,IAChD,MAAM,AAAIH,MAAM,sBAEpB,CAAE,MAAON,EAAG,CACVZ,EAAe,IACfI,EACE,sFAGF,MACF,CAQA,IAAMkB,EAAyB,CAC7BC,MAAO7B,IACPG,SAAUA,GACZ,CAEIA,AAAe,MAAfA,KACFyB,CAAAA,EAAWzB,QAAQ,CAAG,IAAG,EAG3B,GAAI,CACF,IAAM2B,EAAW,MAAMC,MAAM,UAAW,CACtCC,OAAQ,OACRC,QAAS,CACP,eAAgB,kBAClB,EACAC,KAAMC,KAAKC,SAAS,CAACR,EACvB,GAEA,GAAI,CAACE,EAASO,EAAE,CAAE,CAChB,IAAMC,EAAY,MAAMR,EAASS,IAAI,EACrC,OAAM,AAAIf,MACR,CAAC,0BAA0B,EAAEM,EAASU,MAAM,CAAC,CAAC,EAAEV,EAASW,UAAU,CAAC,GAAG,EAAEH,EAAU,CACrF,CACF,CAGArC,EAAa,IACbG,EAAY,IACZI,EAAQ,GACV,CAAE,MAAOkC,EAAO,CACd3B,QAAQ2B,KAAK,CAAC,kCAAmCA,GACjDhC,EAAgB,8CAChBF,EAAQ,GACV,CACF,EAEA,OAAAT,EAAAD,CAAAA,EAAA6C,KAAAC,UAAA,CAAAC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAA9C,EAAA+C,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAGOC,EAAAA,EAAI,MACHC,MAAI,OAAE,CAACzC,GAAM,MACb0C,UAAQ,QAAAC,GAAA,MAAAC,UAAA,KAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,IAAAC,KAAAL,EAAAM,AAAAP,CAAAA,EAAAD,CAAAA,EAAAS,KAAAjB,UAAA,EAAAA,UAAA,CAAAkB,WAAA,CAAAN,EAAAO,AAAAR,CAAAA,EAAAF,EAAAS,WAAA,EAAAlB,UAAA,CAAAkB,WAAA,CAAAL,EAAAF,EAAAO,WAAA,CAAAV,EAAAY,gBAAA,UAYQ/C,GAAYqC,EAAAW,OAAA,CAYZ/C,GAAMjB,EAAaiB,EAAEgD,MAAM,CAACC,KAAK,EAACtB,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAAQ,EAAAP,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAO7CC,EAAAA,EAAI,MAACC,MAAI,OAAE,CAAC3C,GAAa,MAAA8C,UAAA,QAAAiB,GAAA,UAAAZ,EAAAS,OAAA,CAmBd/C,GAAMd,EAAYc,EAAEgD,MAAM,CAACC,KAAK,EAACtB,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAAO,EAAAN,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAQ9CC,EAAAA,EAAI,MAACC,MAAI,QAAEvC,GAAc,MAAA0C,UAAA,KAAAkB,EAAAC,IAC4B,MAD5BzB,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAAwB,EACgB5D,GAAY4D,CAAA,IAAAZ,GAAAc,AAAC,GAADA,EAAAA,EAAAA,AAAAA,EAAC,IAADC,AAAC,GAADA,EAAAA,EAAAA,AAAAA,EAAAlB,EAjC3C,CAAC;;;uBAGxB,EAAyBjD,IAAgB,GAAK,iBAAiB,CAAC,GAAAkE,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAA,IAAAjB,EAAAa,KAAA,CANzCnE,KAAWuE,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAA,IAAAf,EAAAW,KAAA,CA0BXhE,KAAUiD,GAAA,KAAAtD,CA2BjC,EAEM2E,EAAOC,SAASC,cAAc,CAAC,OACjCF,CAAAA,GACFG,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAO,IAAA9B,AAAC,GAADA,EAAAA,EAAAA,AAAAA,EAAOjD,EAAU,IAAK4E,GAC9BI,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAA,U,mICjLD,EAAoB,CAAC,CAAG,CAAC3D,EAAS,KACjC,IAAI,IAAI,KAAO,EACL,EAAoB,CAAC,CAAC,EAAY,IAAQ,CAAC,EAAoB,CAAC,CAACA,EAAS,IACzE4D,OAAO,cAAc,CAAC5D,EAAS,EAAK,CAAE,WAAY,GAAM,IAAK,CAAU,CAAC,EAAI,AAAC,EAGzF,ECNA,EAAoB,CAAC,CAAG,CAAC,EAAK,IAAU4D,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAK,G,MCAlF,IAAI,EAAW,EAAE,AACjB,GAAoB,CAAC,CAAG,CAAC,EAAQ,EAAU,EAAI,KAC9C,GAAI,EAAU,CACb,EAAW,GAAY,EACvB,IAAK,IAAI,EAAI,EAAS,MAAM,CAAE,EAAI,GAAK,CAAQ,CAAC,EAAI,EAAE,CAAC,EAAE,CAAG,EAAU,IACrE,CAAQ,CAAC,EAAE,CAAG,CAAQ,CAAC,EAAI,EAAE,AAC9B,EAAQ,CAAC,EAAE,CAAG,CAAC,EAAU,EAAI,EAAS,CACtC,MACD,CAEA,IAAK,IADD,EAAe,IACV,EAAI,EAAG,EAAI,EAAS,MAAM,CAAE,IAAK,CAGzC,IAAK,GAFD,CAAC,EAAU,EAAI,EAAS,CAAG,CAAQ,CAAC,EAAE,CACtC,EAAY,GACP,EAAI,EAAG,EAAI,EAAS,MAAM,CAAE,IAEnC,AAAC,CAAY,GAAZ,GAAwB,GAAgB,CAAO,GAChDA,OAAO,IAAI,CAAC,EAAoB,CAAC,EAAE,KAAK,CAAC,AAAC,GAAS,EAAoB,CAAC,CAAC,EAAI,CAAC,CAAQ,CAAC,EAAE,GAEzF,EAAS,MAAM,CAAC,IAAK,IAErB,EAAY,GACR,EAAW,GAAc,GAAe,CAAO,GAGrD,GAAI,EAAW,CACd,EAAS,MAAM,CAAC,IAAK,GACrB,IAAI,EAAI,GACJ,AAAM,UAAN,GAAiB,GAAS,EAC/B,CACD,CACA,OAAO,CACR,C,KC/BA,EAAoB,EAAE,CAAG,IAAO,S,MCI1B,IAAI,EAAkB,CAAC,GAAM,EAAE,GAAM,CAAE,CACvC,GAAoB,CAAC,CAAC,CAAC,CAAG,AAAC,GAAa,AAA6B,IAA7B,CAAe,CAAC,EAAQ,CAEtE,IAAI,EAAuB,CAAC,EAA4B,KACvD,IAGI,EAAU,EAHV,CAAC,EAAU,EAAa,EAAQ,CAAG,EAGhB,EAAI,EAC3B,GAAI,EAAS,IAAI,CAAC,AAAC,GAAQ,AAAwB,IAAxB,CAAe,CAAC,EAAG,EAAU,CACvD,IAAK,KAAY,EACZ,EAAoB,CAAC,CAAC,EAAa,IACtC,GAAoB,CAAC,CAAC,EAAS,CAAG,CAAW,CAAC,EAAS,AAAD,EAGxD,GAAI,EAAS,IAAI,EAAS,EAAQ,EACnC,CAEA,IADI,GAA4B,EAA2B,GACpD,EAAI,EAAS,MAAM,CAAE,IAC3B,EAAU,CAAQ,CAAC,EAAE,CAEpB,EAAoB,CAAC,CAAC,EAAiB,IACvC,CAAe,CAAC,EAAQ,EAExB,CAAe,CAAC,EAAQ,CAAC,EAAE,GAE5B,CAAe,CAAC,EAAQ,CAAG,EAE5B,OAAO,EAAoB,CAAC,CAAC,EAC9B,EAEI,EAAqBC,KAAK,eAAkB,CAAGA,KAAK,eAAkB,EAAI,EAAE,CAChF,EAAmB,OAAO,CAAC,EAAqB,IAAI,CAAC,KAAM,IAC3D,EAAmB,IAAI,CAAG,EAAqB,IAAI,CAAC,KAAM,EAAmB,IAAI,CAAC,IAAI,CAAC,G,KCpCvF,EAAoB,IAAI,CAAG,wB"}