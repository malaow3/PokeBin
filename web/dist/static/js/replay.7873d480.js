(()=>{"use strict";var e={574:function(e,t,r){var l=r(247),n=r(927),s=(0,l.XK)(`<div class="container mx-auto px-4"><div class="max-w-3xl mx-auto py-8"><h1 class="text-4xl font-bold mb-4">Fetch <span class=text-[#c2a8d4]>Showdown</span> Private Replays</h1><div class="mb-6 bg-[#c2a8d4] border rounded-lg p-4 text-black"><strong>Privacy Notice:</strong> Your Showdown username and password are <span class=font-semibold>never stored</span> on this site. To fetch your private replays, your credentials must be securely sent to our server, which acts as a proxy to bypass Showdownâ€™s CORS restrictions. All data is transmitted over <span class=font-semibold>encrypted HTTPS</span> and is used only for this request.</div><form class="bg-gray-800 rounded-lg p-6 mb-6 shadow"><div class=mb-4><label class="block mb-1 font-semibold"for=username>Username</label><input id=username class="w-full px-3 py-2 rounded bg-gray-700 text-white"required autocomplete=username></div><div class=mb-4><label class="block mb-1 font-semibold"for=password>Password</label><input id=password type=password class="w-full px-3 py-2 rounded bg-gray-700 text-white"required autocomplete=current-password></div><button type=submit class="bg-[#c2a8d4] hover:bg-[#9770b6] text-black font-bold py-2 px-4 rounded">`),a=(0,l.XK)('<div class="bg-red-700 text-white p-3 rounded mb-4">'),o=(0,l.XK)('<div><div class="flex gap-2 mb-4"><button type=button class="bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded">Copy URLs</button><button type=button class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">Uncheck All</button><button type=button class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">Check All</button></div><div class=overflow-x-auto><table class="min-w-full bg-gray-900 rounded-lg"><thead><tr><th class="px-4 py-2 text-left"><input type=checkbox></th><th class="px-4 py-2 text-left">URL</th><th class="px-4 py-2 text-left">Format</th><th class="px-4 py-2 text-left">Player 1</th><th class="px-4 py-2 text-left">Player 2</th><th class="px-4 py-2 text-left">Upload Time</th></tr></thead><tbody>'),i=(0,l.XK)('<tr><td class="px-4 py-2"><input type=checkbox></td><td class="px-4 py-2 break-all"><a target=_blank rel="noopener noreferrer">Link</a></td><td class="px-4 py-2"></td><td class="px-4 py-2">'),d=(0,l.XK)('<td class="px-4 py-2">');function c(){var e,t,r,c,p,u,h,b,f,y;let[g,x]=(0,n.gQ)(""),[w,m]=(0,n.gQ)(""),[v,k]=(0,n.gQ)(!1),[S,$]=(0,n.gQ)(null),[C,T]=(0,n.gQ)([]),[O,P]=(0,n.gQ)([]),L=null,j=()=>C().map(e=>e.id);function F(){P(j())}function K(){P([])}async function U(){k(!0),$(null),T([]);try{let e=await new Promise((e,t)=>{let r=new WebSocket("wss://sim3.psim.us/showdown/websocket");r.onmessage=t=>{for(let l of t.data.split("\n"))if(l.startsWith("|challstr|")){let t=l.slice(10);r.close(),e(t)}},r.onerror=e=>{t(Error("WebSocket error"))},r.onclose=()=>{}}),t=await fetch("/api/fetch-replays",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:g(),pass:w(),challstr:e})});if(!t.ok)throw alert("Unable to fetch replays, please double check your username & password!"),Error(await t.text());let r=await t.json();T(r)}catch(e){e instanceof Error?console.error(e.message):console.error(String(e))}finally{k(!1)}}function E(){let e=new Set(O()),t=C().filter(t=>e.has(t.id)).map(e=>{let t=`https://replay.pokemonshowdown.com/${e.id}`;return e.password&&(t+=`-${e.password}pw`),t});navigator.clipboard.writeText(t.join("\n"))}return(0,n.H3)(()=>{C().length>0&&F()}),(0,n.GW)(()=>{C().length>0&&F()}),(0,n.H3)(()=>{new WebSocket("/ws").onopen=async()=>{console.log("WebSocket connected to:","/ws")}}),p=(c=(r=(t=(e=s()).firstChild).firstChild.nextSibling.nextSibling).firstChild).firstChild.nextSibling,h=(u=c.nextSibling).firstChild.nextSibling,b=u.nextSibling,e.style.setProperty("color","white"),r.addEventListener("submit",e=>{e.preventDefault(),U()}),p.$$input=e=>x(e.currentTarget.value),h.$$input=e=>m(e.currentTarget.value),(0,l.$T)(b,()=>v()?"Loading...":"Fetch Replays"),(0,l.$T)(t,(f=(0,n.Py)(()=>!!S()),()=>{var e;return f()&&(e=a(),(0,l.$T)(e,S),e)}),null),(0,l.$T)(t,(y=(0,n.Py)(()=>C().length>0),()=>{var e,t,r,s,a,c,p,u;return y()&&(a=(s=(r=(t=(e=o()).firstChild).firstChild).nextSibling).nextSibling,p=(c=t.nextSibling.firstChild.firstChild).firstChild.firstChild.firstChild,u=c.nextSibling,r.$$click=E,s.$$click=K,a.$$click=F,p.addEventListener("change",e=>{e.currentTarget.checked?F():K()}),(0,l.D$)(e=>{e.indeterminate=O().length>0&&O().length<C().length},p),(0,l.$T)(u,(0,n.LM)(n.U2,{get each(){return C()},fallback:null,children:(e,t)=>{var r,s,a,o,c,p,u;let h=`https://replay.pokemonshowdown.com/${e.id}`;return e.password&&(h+=`-${e.password}pw`),a=(s=(r=i()).firstChild).firstChild,c=(o=s.nextSibling).firstChild,u=(p=o.nextSibling).nextSibling,a.$$click=r=>(function(e,t,r){let l=t.id,n=O(),s=[];if(e.shiftKey&&null!==L){let e=Math.min(L,r),t=Math.max(L,r),a=C().slice(e,t+1).map(e=>e.id);s=n.includes(l)?n.filter(e=>!a.includes(e)):Array.from(new Set([...n,...a]))}else s=e.ctrlKey||e.metaKey?n.includes(l)?n.filter(e=>e!==l):[...n,l]:n.includes(l)?n.filter(e=>e!==l):[...n,l],L=r;P(s)})(r,e,t()),(0,l.P$)(c,"href",h),(0,l.$T)(p,()=>e.format),(0,l.$T)(r,(0,n.LM)(n.U2,{get each(){return e.players},fallback:null,children:e=>{var t;return t=d(),(0,l.$T)(t,e),t}}),u),(0,l.$T)(u,()=>new Date(1e3*e.uploadtime).toLocaleString()),(0,n.F3)(()=>{var t;return t=e.id,a.checked=O().includes(t)}),r}})),(0,n.F3)(()=>p.checked=O().length===C().length),e)}),null),(0,n.F3)(()=>b.disabled=v()),(0,n.F3)(()=>p.value=g()),(0,n.F3)(()=>h.value=w()),e}let p=document.getElementById("root");p&&(0,l.sY)(()=>(0,n.LM)(c,{}),p),(0,l.Qj)(["input","click"])}},t={};function r(l){var n=t[l];if(void 0!==n)return n.exports;var s=t[l]={exports:{}};return e[l](s,s.exports,r),s.exports}r.m=e,r.d=(e,t)=>{for(var l in t)r.o(t,l)&&!r.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];r.O=(t,l,n,s)=>{if(l){s=s||0;for(var a=e.length;a>0&&e[a-1][2]>s;a--)e[a]=e[a-1];e[a]=[l,n,s];return}for(var o=1/0,a=0;a<e.length;a++){for(var[l,n,s]=e[a],i=!0,d=0;d<l.length;d++)(!1&s||o>=s)&&Object.keys(r.O).every(e=>r.O[e](l[d]))?l.splice(d--,1):(i=!1,s<o&&(o=s));if(i){e.splice(a--,1);var c=n();void 0!==c&&(t=c)}}return t}})(),r.rv=()=>"1.3.1",(()=>{var e={177:0,95:0};r.O.j=t=>0===e[t];var t=(t,l)=>{var n,s,[a,o,i]=l,d=0;if(a.some(t=>0!==e[t])){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(i)var c=i(r)}for(t&&t(l);d<a.length;d++)s=a[d],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},l=self.webpackChunkweb=self.webpackChunkweb||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})(),r.ruid="bundler=rspack@1.3.1";var l=r.O(void 0,["365","311","95"],function(){return r(574)});l=r.O(l)})();
//# sourceMappingURL=replay.7873d480.js.map