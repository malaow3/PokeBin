(()=>{"use strict";var e={574:function(e,t,r){var s=r(247),a=r(927),l=(0,s.XK)(`<div class="container mx-auto px-4"><div class="max-w-3xl mx-auto py-8"><h1 class="text-4xl font-bold mb-4">Fetch <span class=text-[#c2a8d4]>Showdown</span> Private Replays</h1><div class="mb-6 bg-[#c2a8d4] border rounded-lg p-4 text-black"><strong>Privacy Notice:</strong> Your Showdown username and password are <span class=font-semibold>never stored</span> on this site. To fetch your private replays, your credentials must be securely sent to our server, which acts as a proxy to bypass Showdownâ€™s CORS restrictions. All data is transmitted over <span class=font-semibold>encrypted HTTPS</span> and is used only for this request.</div><form class="bg-gray-800 rounded-lg p-6 mb-6 shadow"><div class=mb-4><label class="block mb-1 font-semibold"for=username>Username</label><input id=username class="w-full px-3 py-2 rounded bg-gray-700 text-white"required autocomplete=username></div><div class=mb-4><label class="block mb-1 font-semibold"for=password>Password</label><input id=password type=password class="w-full px-3 py-2 rounded bg-gray-700 text-white"required autocomplete=current-password></div><button type=submit class="bg-[#c2a8d4] hover:bg-[#9770b6] text-black font-bold py-2 px-4 rounded">`),o=(0,s.XK)('<div class="bg-red-700 text-white p-3 rounded mb-4">'),n=(0,s.XK)('<div><button type=submit class="mb-4 bg-sky-600 hover:bg-sky-700 text-white font-bold py-2 px-4 rounded">Copy All URLs</button><div class=overflow-x-auto><table class="min-w-full bg-gray-900 rounded-lg"><thead><tr><th class="px-4 py-2 text-left">URL</th><th class="px-4 py-2 text-left">Format</th><th class="px-4 py-2 text-left">Player 1</th><th class="px-4 py-2 text-left">Player 2</th><th class="px-4 py-2 text-left">Upload Time</th></tr></thead><tbody>'),i=(0,s.XK)('<tr><td class="px-4 py-2 break-all"><a target=_blank rel="noopener noreferrer">Link</a></td><td class="px-4 py-2"></td><td class="px-4 py-2">'),d=(0,s.XK)('<td class="px-4 py-2">');function c(){var e,t,r,c,p,u,b,h,f,y;let[w,g]=(0,a.gQ)(""),[m,v]=(0,a.gQ)(""),[x,k]=(0,a.gQ)(!1),[S,$]=(0,a.gQ)(null),[T,C]=(0,a.gQ)([]);async function O(){k(!0),$(null),C([]);try{let e=await new Promise((e,t)=>{let r=new WebSocket("wss://sim3.psim.us/showdown/websocket");r.onmessage=t=>{for(let s of t.data.split("\n"))if(s.startsWith("|challstr|")){let t=s.slice(10);r.close(),e(t)}},r.onerror=e=>{t(Error("WebSocket error"))},r.onclose=()=>{}}),t=await fetch("/api/fetch-replays",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:w(),pass:m(),challstr:e})});if(!t.ok)throw alert("Unable to fetch replays, please double check your username & password!"),Error(await t.text());let r=await t.json();C(r)}catch(e){e instanceof Error?console.error(e.message):console.error(String(e))}finally{k(!1)}}function P(){let e=T().map(e=>{let t=`https://replay.pokemonshowdown.com/${e.id}`;return e.password&&(t+=`-${e.password}pw`),t});navigator.clipboard.writeText(e.join("\n"))}return(0,a.H3)(()=>{new WebSocket("/ws").onopen=async()=>{console.log("WebSocket connected to:","/ws")}}),p=(c=(r=(t=(e=l()).firstChild).firstChild.nextSibling.nextSibling).firstChild).firstChild.nextSibling,b=(u=c.nextSibling).firstChild.nextSibling,h=u.nextSibling,e.style.setProperty("color","white"),r.addEventListener("submit",e=>{e.preventDefault(),O()}),p.$$input=e=>g(e.currentTarget.value),b.$$input=e=>v(e.currentTarget.value),(0,s.$T)(h,()=>x()?"Loading...":"Fetch Replays"),(0,s.$T)(t,(f=(0,a.Py)(()=>!!S()),()=>{var e;return f()&&(e=o(),(0,s.$T)(e,S),e)}),null),(0,s.$T)(t,(y=(0,a.Py)(()=>T().length>0),()=>{var e,t,r;return y()&&(r=(t=(e=n()).firstChild).nextSibling.firstChild.firstChild.nextSibling,t.$$click=P,(0,s.$T)(r,(0,a.LM)(a.U2,{get each(){return T()},fallback:null,children:e=>{var t,r,l,o,n;let c=`https://replay.pokemonshowdown.com/${e.id}`;return e.password&&(c+=`-${e.password}pw`),l=(r=(t=i()).firstChild).firstChild,n=(o=r.nextSibling).nextSibling,(0,s.P$)(l,"href",c),(0,s.$T)(o,()=>e.format),(0,s.$T)(t,(0,a.LM)(a.U2,{get each(){return e.players},fallback:null,children:e=>{var t;return t=d(),(0,s.$T)(t,e),t}}),n),(0,s.$T)(n,()=>new Date(1e3*e.uploadtime).toLocaleString()),t}})),e)}),null),(0,a.F3)(()=>h.disabled=x()),(0,a.F3)(()=>p.value=w()),(0,a.F3)(()=>b.value=m()),e}let p=document.getElementById("root");p&&(0,s.sY)(()=>(0,a.LM)(c,{}),p),(0,s.Qj)(["input","click"])}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,r),l.exports}r.m=e,r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];r.O=(t,s,a,l)=>{if(s){l=l||0;for(var o=e.length;o>0&&e[o-1][2]>l;o--)e[o]=e[o-1];e[o]=[s,a,l];return}for(var n=1/0,o=0;o<e.length;o++){for(var[s,a,l]=e[o],i=!0,d=0;d<s.length;d++)(!1&l||n>=l)&&Object.keys(r.O).every(e=>r.O[e](s[d]))?s.splice(d--,1):(i=!1,l<n&&(n=l));if(i){e.splice(o--,1);var c=a();void 0!==c&&(t=c)}}return t}})(),r.rv=()=>"1.3.1",(()=>{var e={177:0,95:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var a,l,[o,n,i]=s,d=0;if(o.some(t=>0!==e[t])){for(a in n)r.o(n,a)&&(r.m[a]=n[a]);if(i)var c=i(r)}for(t&&t(s);d<o.length;d++)l=o[d],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(c)},s=self.webpackChunkweb=self.webpackChunkweb||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),r.ruid="bundler=rspack@1.3.1";var s=r.O(void 0,["837","95"],function(){return r(574)});s=r.O(s)})();
//# sourceMappingURL=replay.9f0618b3.js.map